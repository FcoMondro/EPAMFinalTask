const { expect, browser, $ } = require('@wdio/globals')
const LoginPage = require('../po/pages/login.page');
const credentials = require('./testData');

const loginPage = new LoginPage();

describe("Final Task", () => {
    describe('Swag Labs Login', () => {
        beforeEach(async () => {
            await loginPage.open();
            //await browser.url("https://www.saucedemo.com/");  //siempre reiniciar el browser si no es un e2e
        });

        it("UC-1 Test Login form with empty credentials:", async () =>{
            // Type any credentials into "Username" and "Password" fields.
            await loginPage.loginForm.item('username').setValue(credentials.CREDENTIALS.INVALID_CREDENTIALS.email);
            // await $("//input[@data-test='username']").setValue("");
            await loginPage.loginForm.item('password').setValue(credentials.CREDENTIALS.INVALID_CREDENTIALS.password);
            // await $("//input[@data-test='password']").setValue("");
            
            // Clear the inputs.
            await loginPage.loginForm.item('username').clearValue();
            await loginPage.loginForm.item('password').clearValue();
            
            // Hit the "Login" button.
            await loginPage.loginForm.item('logginButton').click();
            // await $("//input[@data-test='login-button']").click();

            // Check the error messages: "Username is required".  
            await expect(await loginPage.loginForm.item('loginError').getText()).toEqual('Epic sadface: Username is required');
            // const loginError = await $("//div[@class='error-message-container error']/h3");
            // await expect(await loginError.getText()).toEqual('Epic sadface: Username is required');
        });
    });
});